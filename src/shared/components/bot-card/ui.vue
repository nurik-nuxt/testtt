<script setup lang="ts">

interface PropsItem {
  name: string;
  id: number;
  botId: string;
  channels?: {
    channelId: string;
    type: string;
  }[];
  isActive: boolean;
}
const props = withDefaults(defineProps<PropsItem>(), {
  channels(){
    return []
  }
});
const switchValue = ref<boolean>(true);

const editBot = () => {
  return navigateTo({ name: 'chatbots-id', params: { id: props.botId }})
}

const hasInstagram = computed(() => {
  return props.channels?.some(channel => channel.type === 'instagram')
})
const hasTelegram = computed(() => {
  return props.channels?.some(channel => channel.type === 'telegram')
})
const hasWhatsApp = computed(() => {
  return props.channels?.some(channel => channel.type === 'whatsapp')
})

const hasAmoCrm = computed(() => {
  return props.channels?.some(channel => channel.type === 'amocrm')
})

</script>

<template>
  <div class="card-wrapper">
    <div class="bot-card">
      <h5 class="bot-card__title">{{ props.name ? props.name : `New bot ${id + 1}` }}</h5>
      <span class="bot-card__id">id: {{ props.botId }}</span>
      <div class="bot-card__channels">
        <span>{{ $t('channels') }}</span>
        <div class="bot-card__channels-list" v-if="props.channels?.length">
          <i v-if="hasInstagram" style="color: #ec4899" class="pi pi-instagram" />
          <i v-if="hasTelegram" style="color: #3B82F6" class="pi pi-telegram" />
          <i v-if="hasWhatsApp" style="color: #22c55e" class="pi pi-whatsapp" />
          <span v-if="hasAmoCrm" style="width: 14px">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14px" height="14px" viewBox="0 0 14 14" version="1.1">
<defs>
<filter id="alpha" filterUnits="objectBoundingBox" x="0%" y="0%" width="100%" height="100%">
  <feColorMatrix type="matrix" in="SourceGraphic" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"/>
</filter>
<mask id="mask0">
  <g filter="url(#alpha)">
<rect x="0" y="0" width="14" height="14" style="fill:rgb(0%,0%,0%);fill-opacity:0.913725;stroke:none;"/>
  </g>
</mask>
<clipPath id="clip1">
  <rect x="0" y="0" width="14" height="14"/>
</clipPath>
<g id="surface5" clip-path="url(#clip1)">
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(96.862745%,98.431373%,99.215686%);fill-opacity:1;" d="M 5.769531 0.453125 C 9.730469 0.195312 12.257812 1.96875 13.351562 5.769531 C 13.671875 9.734375 11.921875 12.261719 8.101562 13.351562 C 4.136719 13.671875 1.609375 11.921875 0.519531 8.101562 C 0.214844 4.125 1.964844 1.578125 5.769531 0.453125 Z M 5.769531 0.453125 "/>
</g>
</defs>
<g id="surface1">
<use xlink:href="#surface5" mask="url(#mask0)"/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(21.960784%,60.784314%,82.352941%);fill-opacity:1;" d="M 11.214844 2.785156 C 11.046875 3.03125 10.8125 3.160156 10.5 3.175781 C 7.945312 3.085938 5.398438 3.085938 2.851562 3.175781 C 2.683594 3.066406 2.707031 2.914062 2.917969 2.722656 C 2.886719 2.671875 2.84375 2.648438 2.785156 2.65625 C 5.171875 0.628906 7.722656 0.433594 10.433594 2.074219 C 10.679688 2.34375 10.941406 2.578125 11.214844 2.785156 Z M 11.214844 2.785156 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(18.039216%,58.431373%,81.176471%);fill-opacity:1;" d="M 2.785156 2.65625 C 2.84375 2.648438 2.886719 2.671875 2.917969 2.722656 C 2.707031 2.914062 2.683594 3.066406 2.851562 3.175781 C 5.398438 3.085938 7.945312 3.085938 10.5 3.175781 C 10.8125 3.160156 11.046875 3.03125 11.214844 2.785156 C 12.480469 4.027344 13.019531 5.542969 12.832031 7.324219 C 12.703125 7.433594 12.550781 7.476562 12.378906 7.453125 C 12.609375 6.363281 12.21875 5.996094 11.214844 6.351562 C 10.855469 6.878906 10.898438 7.375 11.34375 7.84375 C 10.371094 8.058594 10.050781 7.671875 10.371094 6.675781 C 10.78125 6.15625 11.324219 5.898438 11.992188 5.898438 C 10.734375 5.230469 9.871094 5.574219 9.398438 6.933594 C 9.355469 6.933594 9.3125 6.933594 9.269531 6.933594 C 9.441406 5.964844 9.050781 5.59375 8.101562 5.832031 C 7.992188 5.964844 7.863281 6.074219 7.714844 6.15625 C 7.335938 5.421875 6.839844 5.332031 6.222656 5.898438 C 6.140625 5.664062 5.988281 5.492188 5.769531 5.378906 C 5.480469 5.5625 5.285156 5.824219 5.183594 6.15625 C 5.042969 6.664062 4.957031 7.183594 4.925781 7.714844 C 4.792969 7.820312 4.644531 7.863281 4.472656 7.84375 C 4.410156 7.207031 4.5 6.601562 4.730469 6.027344 C 4.726562 5.828125 4.640625 5.679688 4.472656 5.574219 C 3.972656 5.554688 3.457031 5.554688 2.917969 5.574219 C 2.460938 5.878906 2.070312 6.246094 1.75 6.675781 C 1.757812 6.617188 1.738281 6.574219 1.683594 6.546875 C 1.59375 6.738281 1.441406 6.824219 1.230469 6.804688 C 1.253906 6.5 1.230469 6.199219 1.167969 5.898438 C 1.101562 6.542969 1.082031 7.191406 1.101562 7.84375 C 0.726562 5.820312 1.285156 4.089844 2.785156 2.65625 Z M 2.785156 2.65625 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(16.470588%,56.862745%,80.392157%);fill-opacity:1;" d="M 3.433594 6.027344 C 3.585938 6 3.71875 6.042969 3.824219 6.15625 C 3.726562 6.582031 3.660156 7.015625 3.628906 7.453125 C 3.363281 7.972656 3.019531 8.058594 2.59375 7.714844 C 2.527344 6.976562 2.808594 6.414062 3.433594 6.027344 Z M 3.433594 6.027344 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(29.411765%,62.352941%,82.745098%);fill-opacity:1;" d="M 11.730469 6.675781 C 11.878906 6.714844 11.96875 6.820312 11.992188 7 C 11.949219 7.109375 11.90625 7.214844 11.859375 7.324219 C 11.738281 7.125 11.695312 6.90625 11.730469 6.675781 Z M 11.730469 6.675781 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(55.686275%,75.686275%,89.019608%);fill-opacity:1;" d="M 9.269531 6.933594 C 9.3125 6.933594 9.355469 6.933594 9.398438 6.933594 C 9.4375 7.25 9.394531 7.550781 9.269531 7.84375 C 9.101562 7.523438 9.101562 7.21875 9.269531 6.933594 Z M 9.269531 6.933594 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(14.117647%,55.686275%,79.607843%);fill-opacity:1;" d="M 1.75 6.675781 C 1.292969 8.050781 1.765625 8.675781 3.175781 8.554688 C 3.40625 8.453125 3.601562 8.300781 3.757812 8.101562 C 3.960938 8.605469 4.304688 8.734375 4.796875 8.492188 C 5.125 8.824219 5.449219 8.824219 5.769531 8.492188 C 5.875 7.976562 5.941406 7.460938 5.964844 6.933594 C 6.035156 6.519531 6.273438 6.304688 6.675781 6.285156 C 6.65625 7.066406 6.675781 7.84375 6.742188 8.621094 C 6.984375 8.730469 7.222656 8.6875 7.453125 8.492188 C 7.332031 7.753906 7.503906 7.082031 7.972656 6.480469 C 8.09375 6.417969 8.226562 6.398438 8.359375 6.417969 C 8.347656 6.851562 8.304688 7.28125 8.230469 7.714844 C 8.21875 8.027344 8.304688 8.308594 8.492188 8.554688 C 8.871094 8.601562 9.238281 8.539062 9.59375 8.359375 C 10.144531 8.621094 10.726562 8.683594 11.34375 8.554688 C 11.734375 8.164062 12.207031 8.011719 12.769531 8.101562 C 12.699219 8.625 12.527344 9.101562 12.25 9.527344 C 12.144531 9.40625 12.035156 9.277344 11.925781 9.140625 C 8.632812 9.277344 5.304688 9.277344 1.945312 9.140625 C 1.773438 9.21875 1.667969 9.351562 1.621094 9.527344 C 1.308594 9.023438 1.136719 8.460938 1.101562 7.84375 C 1.082031 7.191406 1.101562 6.542969 1.167969 5.898438 C 1.230469 6.199219 1.253906 6.5 1.230469 6.804688 C 1.441406 6.824219 1.59375 6.738281 1.683594 6.546875 C 1.738281 6.574219 1.757812 6.617188 1.75 6.675781 Z M 1.75 6.675781 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(7.058824%,53.333333%,78.431373%);fill-opacity:1;" d="M 12.25 9.527344 C 12.089844 9.988281 11.832031 10.375 11.472656 10.695312 C 8.449219 10.523438 5.421875 10.523438 2.398438 10.695312 C 2.039062 10.375 1.777344 9.988281 1.621094 9.527344 C 1.667969 9.351562 1.773438 9.21875 1.945312 9.140625 C 5.304688 9.277344 8.632812 9.277344 11.925781 9.140625 C 12.035156 9.277344 12.144531 9.40625 12.25 9.527344 Z M 12.25 9.527344 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(7.45098%,51.764706%,77.647059%);fill-opacity:1;" d="M 11.472656 10.695312 C 10.285156 12.207031 8.707031 12.941406 6.742188 12.898438 C 4.9375 12.828125 3.488281 12.09375 2.398438 10.695312 C 5.421875 10.523438 8.449219 10.523438 11.472656 10.695312 Z M 11.472656 10.695312 "/>
</g>
</svg>          </span>

        </div>
        <div v-else>-</div>
      </div>
      <div class="bot-card__options">
        <div class="bot-card__edit">
          <button @click="editBot" class="bot-card__check flex item-center">{{ $t('settings') }}<span class="bot-card__edit-icon"><i class="pi pi-cog" style="cursor: pointer" /></span></button>
        </div>
        <span class="bot-card__activate">
            {{ $t('onOffButton') }}
            <InputSwitch v-model="switchValue" style="margin-left: 4px"/>
          </span>
      </div>
    </div>
  </div>
</template>

<style scoped>
.bot-card__channels-list svg {
  width: 14px;
  height: 14px;
}
</style>